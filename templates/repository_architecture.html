{% extends "base.html" %} {% block title %}Architecture - {{ repository.name }} -
Noctum{% endblock %} {% block content %}
<style>
    .breadcrumb {
        margin-bottom: 1rem;
        color: var(--text-secondary);
    }
    .breadcrumb a {
        color: var(--accent);
        text-decoration: none;
    }
    .breadcrumb a:hover {
        text-decoration: underline;
    }

    .repo-header {
        margin-bottom: 1.5rem;
    }
    .repo-path {
        color: var(--text-secondary);
        font-family: monospace;
        margin-bottom: 0;
    }

    .architecture-summary .card {
        border-left: 3px solid var(--accent);
    }
    .markdown-content {
        line-height: 1.7;
    }
    .markdown-content h1,
    .markdown-content h2,
    .markdown-content h3,
    .markdown-content h4,
    .markdown-content h5,
    .markdown-content h6 {
        margin-top: 1.5rem;
        margin-bottom: 0.75rem;
        color: var(--text-primary);
    }
    .markdown-content h1 {
        font-size: 1.5rem;
    }
    .markdown-content h2 {
        font-size: 1.25rem;
    }
    .markdown-content h3 {
        font-size: 1.1rem;
    }
    .markdown-content p {
        margin-bottom: 1rem;
    }
    .markdown-content ul,
    .markdown-content ol {
        margin-bottom: 1rem;
        padding-left: 1.5rem;
    }
    .markdown-content li {
        margin-bottom: 0.25rem;
    }
    .markdown-content code {
        background-color: var(--bg-tertiary);
        padding: 0.125rem 0.375rem;
        border-radius: 3px;
        font-family: "SF Mono", Monaco, "Cascadia Code", monospace;
        font-size: 0.875em;
    }
    .markdown-content pre {
        background-color: var(--bg-tertiary);
        padding: 1rem;
        border-radius: 6px;
        overflow-x: auto;
        margin-bottom: 1rem;
    }
    .markdown-content pre code {
        background: none;
        padding: 0;
    }
    .markdown-content blockquote {
        border-left: 3px solid var(--border);
        padding-left: 1rem;
        margin: 1rem 0;
        color: var(--text-secondary);
    }
    .markdown-content table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 1rem;
    }
    .markdown-content th,
    .markdown-content td {
        border: 1px solid var(--border);
        padding: 0.5rem;
        text-align: left;
    }
    .markdown-content th {
        background-color: var(--bg-tertiary);
    }
    .markdown-content strong {
        color: var(--text-primary);
    }

    .empty-state {
        color: var(--text-secondary);
        padding: 3rem;
        text-align: center;
    }
</style>

<div class="breadcrumb">
    <a href="/repositories">Repositories</a> / {{ repository.name }}
</div>

<div class="repo-header">
    <h1>{{ repository.name }}</h1>
    <p class="repo-path">{{ repository.path }}</p>
</div>

<nav class="tabs">
    <a href="/repositories/{{ repository.id }}/architecture" class="tab active">Architecture</a>
    <a href="/repositories/{{ repository.id }}/files" class="tab">File Analysis</a>
    <a href="/repositories/{{ repository.id }}/mutations" class="tab">Mutation Testing</a>
</nav>

{% match architecture_summary %} {% when Some with (summary) %}
<div class="architecture-summary">
    <div class="card">
        <div style="color: var(--text-secondary); font-size: 0.75rem; margin-bottom: 1rem">
            Updated: {{ summary.created_at }}
        </div>
        <div class="markdown-content">{{ architecture_summary_html|safe }}</div>
    </div>
</div>
{% when None %}
<div class="card">
    <div class="empty-state">
        <p>No architecture analysis yet.</p>
        <p style="margin-top: 0.5rem">
            Architecture analysis runs automatically during the scheduled window.
        </p>
    </div>
</div>
{% endmatch %}
{% endblock %}
